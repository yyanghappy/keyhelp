# KeyHelp 使用文档

## 快速开始

### 安装Flutter

首先需要安装Flutter SDK：

```bash
./scripts/install_flutter.sh
```

安装完成后，重启终端以使PATH生效。

### 运行应用

```bash
# 连接Android设备或启动模拟器
./scripts/run.sh
```

### 构建Release

```bash
./scripts/build.sh
```

生成的APK位于：`build/app/outputs/flutter-apk/app-release.apk`

## 功能使用

### 1. 脚本录制

1. 打开应用，点击"脚本录制"
2. 输入脚本名称
3. 点击"开始"按钮开始录制
4. 在屏幕上执行操作（点击、滑动、长按等）
5. 点击"停止"按钮结束录制
6. 点击"保存"保存脚本

### 2. 脚本管理

1. 点击首页的"脚本列表"
2. 查看所有已录制的脚本
3. 点击播放图标执行脚本
4. 点击删除图标删除脚本

### 3. 定时任务

1. 点击首页的"定时任务"
2. 查看所有定时任务
3. 开关控制任务的启用/禁用

## 权限说明

KeyHelp需要以下权限才能正常工作：

- **无障碍服务**：用于触控模拟和操作监听
- **系统悬浮窗**：显示执行状态
- **电池优化白名单**：保证后台定时任务正常执行

## 数据存储

- 脚本存储位置：`应用数据/scripts`
- 定时任务存储位置：`应用数据/tasks`
- 日志文件位置：`logs/` 目录

## 常见问题

### Flutter环境问题

如果遇到Flutter相关错误，请确保：

1. Flutter SDK已正确安装
2. Android SDK已配置
3. 已接受Android许可：`flutter doctor --android-licenses`

### 设备连接问题

如果无法检测到设备：

1. 确保USB调试已开启
2. 确认设备已连接
3. 检查是否已授权电脑调试权限
4. 尝试重启adb服务：`adb kill-server && adb start-server`

### Hive适配器生成失败

如果生成失败，运行：

```bash
flutter pub run build_runner build --delete-conflicting-outputs
```

## 技术支持

如有问题，请查看 `logs/` 目录下的日志文件。
